# HW21: Управление конфигурацией с Ansible — Роли

## Цель
Настроить Ansible-проект с использованием **ролей** для установки и обновления пакетов `nginx` и `htop` на управляемой ноде (`pg1`).

## Применённые практики (лекция L20)
- Использованы **Ansible-роли** — отдельная роль для `nginx`, отдельная для `htop`
- Использован параметр `state: latest` — если пакет установлен, он обновляется; если нет — устанавливается
- Плейбук **идемпотентен**: повторный запуск не создаёт дубликатов и не ломает систему

## Структура проекта
- `roles/nginx/tasks/main.yml` — установка/обновление Nginx
- `roles/htop/tasks/main.yml` — установка/обновление htop
- `playbook.yaml` — подключение ролей к группе хостов `patroni_nodes`
- `inventory.ini` — описание хоста `pg1` с портом SSH 2222
- `ansible.cfg` — отключение проверки host key и указание inventory

## Результат
- Оба пакета (`nginx`, `htop`) успешно установлены и актуальны на `pg1`
- Плейбук выполнен без ошибок (`changed=0` при повторном запуске)
- Подтверждено двумя скриншотами:
  - `скрин 1.png` — содержимое `playbook.yaml`
  - `скрин2.png` — результат выполнения плейбука

